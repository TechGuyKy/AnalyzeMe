<Page x:Class="AnalyzeMe.Views.DiagnosticsView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      mc:Ignorable="d"
      d:DesignHeight="750" d:DesignWidth="1250"
      Background="Transparent">

	<ScrollViewer VerticalScrollBarVisibility="Auto" Padding="20">
		<StackPanel>
			<TextBlock Text="SYSTEM DIAGNOSTICS"
                     Style="{StaticResource TitleText}"
                     Margin="0,0,0,20"/>

			<!-- Summary Cards -->
			<Grid Margin="0,0,0,20">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="*"/>
				</Grid.ColumnDefinitions>

				<Border Grid.Column="0" Style="{StaticResource MetricCard}">
					<StackPanel>
						<TextBlock Text="🔥 CRITICAL"
                                 FontSize="14"
                                 FontFamily="Consolas"
                                 Foreground="#ff0000"
                                 Margin="0,0,0,10"/>
						<TextBlock x:Name="CriticalCountText"
                                 Text="0"
                                 FontSize="36"
                                 FontFamily="Consolas"
                                 FontWeight="Bold"
                                 Foreground="#ff0000"/>
					</StackPanel>
				</Border>

				<Border Grid.Column="1" Style="{StaticResource MetricCard}">
					<StackPanel>
						<TextBlock Text="❌ ERRORS"
                                 FontSize="14"
                                 FontFamily="Consolas"
                                 Foreground="#ff0055"
                                 Margin="0,0,0,10"/>
						<TextBlock x:Name="ErrorCountText"
                                 Text="0"
                                 FontSize="36"
                                 FontFamily="Consolas"
                                 FontWeight="Bold"
                                 Foreground="#ff0055"/>
					</StackPanel>
				</Border>

				<Border Grid.Column="2" Style="{StaticResource MetricCard}">
					<StackPanel>
						<TextBlock Text="⚠️ WARNINGS"
                                 FontSize="14"
                                 FontFamily="Consolas"
                                 Foreground="#ffaa00"
                                 Margin="0,0,0,10"/>
						<TextBlock x:Name="WarningCountText"
                                 Text="0"
                                 FontSize="36"
                                 FontFamily="Consolas"
                                 FontWeight="Bold"
                                 Foreground="#ffaa00"/>
					</StackPanel>
				</Border>

				<Border Grid.Column="3" Style="{StaticResource MetricCard}">
					<StackPanel>
						<TextBlock Text="ℹ️ INFO"
                                 FontSize="14"
                                 FontFamily="Consolas"
                                 Foreground="#00ffff"
                                 Margin="0,0,0,10"/>
						<TextBlock x:Name="InfoCountText"
                                 Text="0"
                                 FontSize="36"
                                 FontFamily="Consolas"
                                 FontWeight="Bold"
                                 Foreground="#00ffff"/>
					</StackPanel>
				</Border>
			</Grid>

			<Border Style="{StaticResource CyberCard}">
				<StackPanel>
					<Grid Margin="0,0,0,15">
						<TextBlock Text="DIAGNOSTIC RESULTS"
                                 FontFamily="Consolas"
                                 FontSize="18"
                                 FontWeight="Bold"
                                 Foreground="#00ffff"/>
						<Button Content="🔄 RUN FULL SCAN"
                              Style="{StaticResource CyberButton}"
                              HorizontalAlignment="Right"
                              Click="RunScanButton_Click"/>
					</Grid>

					<ListView x:Name="DiagnosticsListView"
                            Style="{StaticResource CyberListView}"
                            MinHeight="450">
						<ListView.ItemTemplate>
							<DataTemplate>
								<Border Background="#0f1420"
                                      BorderThickness="2"
                                      CornerRadius="8"
                                      Padding="20"
                                      Margin="0,10">
									<Border.Style>
										<Style TargetType="Border">
											<Style.Triggers>
												<DataTrigger Binding="{Binding Severity}" Value="Critical">
													<Setter Property="BorderBrush" Value="#ff0000"/>
												</DataTrigger>
												<DataTrigger Binding="{Binding Severity}" Value="Error">
													<Setter Property="BorderBrush" Value="#ff0055"/>
												</DataTrigger>
												<DataTrigger Binding="{Binding Severity}" Value="Warning">
													<Setter Property="BorderBrush" Value="#ffaa00"/>
												</DataTrigger>
												<DataTrigger Binding="{Binding Severity}" Value="Info">
													<Setter Property="BorderBrush" Value="#00ffff"/>
												</DataTrigger>
											</Style.Triggers>
										</Style>
									</Border.Style>

									<Grid>
										<Grid.RowDefinitions>
											<RowDefinition Height="Auto"/>
											<RowDefinition Height="Auto"/>
											<RowDefinition Height="Auto"/>
											<RowDefinition Height="Auto"/>
										</Grid.RowDefinitions>

										<StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
											<TextBlock Text="{Binding SeverityIcon}"
                                                     FontSize="20"
                                                     Margin="0,0,10,0"/>
											<TextBlock Text="{Binding Category}"
                                                     FontFamily="Consolas"
                                                     FontSize="12"
                                                     Foreground="#6a7a8a"
                                                     VerticalAlignment="Center"
                                                     Margin="0,0,10,0"/>
											<Border Background="{Binding SeverityColor}"
                                                  CornerRadius="3"
                                                  Padding="5,2">
												<TextBlock Text="{Binding Severity}"
                                                         FontFamily="Consolas"
                                                         FontSize="11"
                                                         FontWeight="Bold"
                                                         Foreground="#000000"/>
											</Border>
										</StackPanel>

										<TextBlock Grid.Row="1"
                                                 Text="{Binding Title}"
                                                 FontFamily="Consolas"
                                                 FontSize="18"
                                                 FontWeight="Bold"
                                                 Foreground="#ffffff"
                                                 Margin="0,0,0,10"/>

										<TextBlock Grid.Row="2"
                                                 Text="{Binding Description}"
                                                 FontFamily="Consolas"
                                                 FontSize="13"
                                                 Foreground="#cccccc"
                                                 TextWrapping="Wrap"
                                                 Margin="0,0,0,15"/>

										<Border Grid.Row="3"
                                              Background="#1a1f2e"
                                              CornerRadius="5"
                                              Padding="15">
											<StackPanel>
												<TextBlock Text="💡 RECOMMENDED SOLUTION:"
                                                         FontFamily="Consolas"
                                                         FontSize="12"
                                                         FontWeight="Bold"
                                                         Foreground="#00ffff"
                                                         Margin="0,0,0,8"/>
												<TextBlock Text="{Binding Resolution}"
                                                         FontFamily="Consolas"
                                                         FontSize="13"
                                                         Foreground="#ffffff"
                                                         TextWrapping="Wrap"/>
											</StackPanel>
										</Border>
									</Grid>
								</Border>
							</DataTemplate>
						</ListView.ItemTemplate>
					</ListView>
				</StackPanel>
			</Border>
		</StackPanel>
	</ScrollViewer>
</Page>